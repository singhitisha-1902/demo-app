import { useMemo, useState, useEffect } from 'react';

const useColumnVisibility = ({
  columns
}) => {
  const columnVisibilityState = useMemo(() => {
    const columnVisibilityInitialStateObj = columns.reduce((prev, curr) => ({
      ...prev,
      [`${curr.id}`]: !curr.meta?.isHidden
    }), {});
    return columnVisibilityInitialStateObj;
  }, [columns]);
  const [columnVisibility, setColumnVisibility] = useState(columnVisibilityState);
  useEffect(() => {
    setColumnVisibility(columnVisibilityState);
  }, [columnVisibilityState]);
  return {
    columnVisibility,
    setColumnVisibility
  };
};

export { useColumnVisibility };
